@model AMS.Models.DeviceAndTool


<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" onclick="$('#CRUDDialog').modal('hide');"><span aria-hidden="true">&times;</span><span class="sr-only">Đóng</span></button>
            <h4 class="modal-title" id="myModalLabel">Sửa<small> thông tin thiết bị, công cụ</small></h4>
        </div>

        @using (Html.BeginForm("Edit", "DeviceAndTools", FormMethod.Post, new { id = "Subfrm-search" }))
        {
            @Html.AntiForgeryToken()
            <div class="modal-body" style="max-height:300px; overflow:auto">
                <div class="form-horizontal">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.HiddenFor(model => model.Id)
                    <div class="form-group">
                        @Html.LabelFor(model => model.CompanyId, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.DropDownList("CompanyId", null, htmlAttributes: new { @class = "form-control input-sm" })
                            @Html.ValidationMessageFor(model => model.CompanyId, "", new { @class = "text-danger" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(model => model.DeviceCatId, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            <div class="input-group">
                                <span class="input-group-addon" style="padding:0px !important;">
                                    <label class="radio" style="margin-bottom:0px; font-weight:normal; margin:0px 10px 0px 35px">
                                        <input type="radio" name="optToolDevice" value="vp" onchange="EnableDisableDropdown(this)" @Html.Raw(ViewBag.Type == "vp" ? "checked" : "") /> VP
                                    </label>
                                </span>
                                @if (ViewBag.Type == "vp")
                                {
                                    @Html.DropDownList("DeviceVPId", null, htmlAttributes: new { @class = "form-control" })
                                }
                                else
                                {
                                    @Html.DropDownList("DeviceVPId", null, htmlAttributes: new { @class = "form-control", @disabled = "disabled" })
                                }
                                
                                <span class="input-group-addon" style="padding:0px !important;">
                                    <label class="radio" style="margin-bottom:0px; font-weight:normal; margin:0px 10px 0px 35px">
                                        <input type="radio" name="optToolDevice" value="it" onchange="EnableDisableDropdown(this)" @Html.Raw(ViewBag.Type == "it" ? "checked" : "") /> IT
                                    </label>
                                </span>
                                @if (ViewBag.Type == "it")
                                {
                                    @Html.DropDownList("DeviceITId", null, htmlAttributes: new { @class = "form-control" })
                                }
                                else
                                {
                                    @Html.DropDownList("DeviceITId", null, htmlAttributes: new { @class = "form-control", @disabled = "disabled" })
                                }
                              
                            </div>
                            @Html.ValidationMessageFor(model => model.DeviceCatId, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.ToolCatId, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            <div class="input-group">
                                <span class="input-group-addon" style="padding:0px !important;" >
                                    <label class="radio" style="margin-bottom:0px; font-weight:normal; margin:0px 10px 0px 35px">
                                        <input type="radio" name="optToolDevice" value="cc" onchange="EnableDisableDropdown(this)" @Html.Raw(ViewBag.Type == "cc"? "checked":"") /> Công cụ
                                    </label>
                                </span>
                                @if (ViewBag.Type == "cc")
                                {
                                    @Html.DropDownList("ToolCatId", null, htmlAttributes: new { @class = "form-control", @style = "max-width:180px"  })
                                }
                                else
                                {
                                    @Html.DropDownList("ToolCatId", null, htmlAttributes: new { @class = "form-control", @style = "max-width:180px", @disabled = "disabled" })
                                }
                               
                            </div>
                            @Html.ValidationMessageFor(model => model.ToolCatId, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.AssetsCode, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.AssetsCode, new { htmlAttributes = new { @class = "form-control input sm" } })
                            @Html.ValidationMessageFor(model => model.AssetsCode, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.DeviceName, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.DeviceName, new { htmlAttributes = new { @class = "form-control input sm" } })
                            @Html.ValidationMessageFor(model => model.DeviceName, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.DescriptionDevice, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.DescriptionDevice, new { htmlAttributes = new { @class = "form-control input sm" } })
                            @Html.ValidationMessageFor(model => model.DescriptionDevice, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.BuyDate, htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.BuyDate, new { htmlAttributes = new { @class = "form-control input sm datemarsk" } })
                            @Html.ValidationMessageFor(model => model.BuyDate, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="submit" class="btn btn-default">
                    <span class="glyphicon glyphicon-floppy-disk"></span> Lưu
                </button>
                <button type="button" onclick="$('#CRUDDialog').modal('hide');" class="btn btn-default" aria-hidden="true"><span class="glyphicon glyphicon-arrow-left"></span> Hủy</button>
            </div>
        }
    </div>
</div>

<script type="text/javascript">
    function EnableDisableDropdown(elm)
    {
        if ($(elm).val() == 'vp'){
            $('#DeviceVPId').removeAttr("disabled");
            $('#DeviceITId').attr("disabled", "disabled");
            $('#ToolCatId').attr("disabled", "disabled");
        }
        if ($(elm).val() == 'it') {
            $('#DeviceVPId').attr("disabled", "disabled");
            $('#DeviceITId').removeAttr("disabled");
            $('#ToolCatId').attr("disabled", "disabled");
        }
        if ($(elm).val() == 'cc') {            
            $('#DeviceVPId').attr("disabled", "disabled");
            $('#DeviceITId').attr("disabled", "disabled");
            $('#ToolCatId').removeAttr("disabled");
        }
    }


    $(document).ready(function () {
        $('.number-float').inputmask("decimal", {
            radixPoint: ".",
            groupSeparator: ",",
            digits: 2,
            autoGroup: true
        });
        $('.datemarsk').inputmask({ alias: 'dd/mm/yyyy' });
        $('.datemarsk').datepicker({
            language: 'vi',
            autoclose: true,
            todayHighlight: true
        }).on('show', function (e) {
            $('.datepicker').click(function () { return false; });
        });
    })
</script>